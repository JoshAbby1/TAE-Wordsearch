<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Word Search Game</title>
<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }

    body {
        background: #777; /* grey */
        font-family: Arial, sans-serif;
        user-select: none;
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    /* FULL SCREEN PAINT SPLATTERS */
    body::before {
        content: "";
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background-image:
           radial-gradient(circle, yellow 0%, transparent 60%),
           radial-gradient(circle, yellow 0%, transparent 70%),
           radial-gradient(circle, yellow 0%, transparent 65%),
           radial-gradient(circle, yellow 0%, transparent 60%),
           radial-gradient(circle, yellow 0%, transparent 70%);
        background-size:
           400px 400px,
           320px 320px,
           300px 300px,
           350px 350px,
           280px 280px;
        background-position:
           12% 18%, 78% 28%, 50% 88%, 18% 70%, 88% 78%;
        opacity: 0.45;
        z-index: 0;
        pointer-events: none;
    }

    /* TITLE + CREDIT */
    #title {
        margin-top: 20px;
        font-size: 42px;
        font-weight: bold;
        color: white;
        z-index: 10;
        text-align: center;
    }

    #credit {
        margin-top: -10px;
        font-size: 18px;
        color: #fff;
        opacity: 0.9;
        z-index: 10;
        text-align: center;
    }

    /* WORD LIST */
    #wordlist {
        margin-top: 10px;
        padding: 10px 18px;
        background: rgba(255,255,255,0.25);
        color: white;
        border-radius: 10px;
        font-size: 21px;
        text-align: center;
        z-index: 10;
    }

    /* GRID WRAPPER — THIS IS WHAT CENTRES THE PUZZLE */
    #grid-wrapper {
        flex-grow: 1;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;   /* perfect middle */
        z-index: 10;
        padding-bottom: 40px;
    }

    /* THE GRID ITSELF (MADE MUCH BIGGER) */
    #grid {
        display: grid;
        gap: 5px;
    }

    .cell {
        width: 48px;
        height: 48px;
        background: white;
        color: black;
        border-radius: 6px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 26px;
        font-weight: bold;
    }

    .selected {
        background: yellow;
    }

    .found {
        background: #00e000 !important;
        color: black;
    }
</style>
</head>
<body>

<div id="title">WORD SEARCH</div>
<div id="credit">made by @nortydigitalcrew</div>

<div id="wordlist">Loading...</div>

<!-- NEW: This wrapper centres the grid -->
<div id="grid-wrapper">
    <div id="grid"></div>
</div>

<script>
let gridSize = 10;
let grid = [];
let selectedCells = [];
let foundWords = [];
let currentWords = [];
let level = 1;

function generateWords() {
    const baseWords = [
        "CAT","DOG","TREE","MILK","MOON","STAR","FROG","HILL","WOLF","SNAKE",
        "PHONE","BRICK","CHAIR","SPOON","BREAD","WATER","MONEY","STONE",
        "FLOWER","PLANET","ROCKET","PUZZLE","JUNGLE","MONKEY"
    ];

    const maxLength = Math.min(4 + level, 10);
    const filtered = baseWords.filter(w => w.length <= maxLength);

    shuffle(filtered);

    return filtered.slice(0, 5);
}

function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

function generateGrid() {
    grid = Array(gridSize)
        .fill(null)
        .map(() => Array(gridSize).fill(""));

    currentWords = generateWords();
    foundWords = [];

    placeWords();
    fillRandomLetters();
    renderGrid();
    updateWordList();
}

function placeWords() {
    for (const word of currentWords) {
        let placed = false;

        while (!placed) {
            const x = Math.floor(Math.random() * gridSize);
            const y = Math.floor(Math.random() * gridSize);

            const directions = [
                [1,0],[-1,0],[0,1],[0,-1],
                [1,1],[-1,-1],[1,-1],[-1,1]
            ];
            shuffle(directions);

            for (const [dx,dy] of directions) {
                if (canPlace(word, x, y, dx, dy)) {
                    for (let i = 0; i < word.length; i++) {
                        grid[y + i*dy][x + i*dx] = word[i];
                    }
                    placed = true;
                    break;
                }
            }
        }
    }
}

function canPlace(word, x, y, dx, dy) {
    for (let i = 0; i < word.length; i++) {
        const nx = x + i*dx;
        const ny = y + i*dy;
        if (nx < 0 || nx >= gridSize || ny < 0 || ny >= gridSize) return false;
        if (grid[ny][nx] !== "" && grid[ny][nx] !== word[i]) return false;
    }
    return true;
}

function fillRandomLetters() {
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    for (let y = 0; y < gridSize; y++) {
        for (let x = 0; x < gridSize; x++) {
            if (grid[y][x] === "") {
                grid[y][x] = letters[Math.floor(Math.random()*letters.length)];
            }
        }
    }
}

function renderGrid() {
    const g = document.getElementById("grid");
    g.style.gridTemplateColumns = `repeat(${gridSize}, 48px)`;
    g.innerHTML = "";

    for (let y = 0; y < gridSize; y++) {
        for (let x = 0; x < gridSize; x++) {
            const cell = document.createElement("div");
            cell.className = "cell";
            cell.textContent = grid[y][x];
            cell.dataset.x = x;
            cell.dataset.y = y;

            cell.addEventListener("click", () => handleSelect(cell));
            g.appendChild(cell);
        }
    }
}

function updateWordList() {
    document.getElementById("wordlist").innerHTML =
        currentWords.map(w =>
            foundWords.includes(w)
            ? `<span style="text-decoration: line-through; color:#a0ffa0;">${w}</span>`
            : w
        ).join(" • ");
}

function handleSelect(cell) {
    cell.classList.add("selected");
    selectedCells.push(cell);

    if (selectedCells.length >= 2) checkSelection();
}

function checkSelection() {
    const letters = selectedCells.map(c => c.textContent).join("");
    const reversed = letters.split("").reverse().join("");

    const match = currentWords.find(w => w === letters || w === reversed);

    if (match) {
        foundWords.push(match);
        highlightWord(match);
        updateWordList();

        if (foundWords.length === currentWords.length) {
            setTimeout(nextLevel, 800);
        }
    }

    setTimeout(() => {
        selectedCells.forEach(c => c.classList.remove("selected"));
        selectedCells = [];
    }, 200);
}

function highlightWord(word) {
    const rev = word.split("").reverse().join("");

    for (let y = 0; y < gridSize; y++) {
        for (let x = 0; x < gridSize; x++) {

            const dirs = [
                [1,0],[-1,0],[0,1],[0,-1],
                [1,1],[-1,-1],[1,-1],[-1,1]
            ];

            for (const [dx,dy] of dirs) {
                let text = "";

                for (let i = 0; i < word.length; i++) {
                    const nx = x + i*dx;
                    const ny = y + i*dy;

                    if (nx < 0 || nx >= gridSize || ny < 0 || ny >= gridSize) break;
                    text += grid[ny][nx];
                }

                if (text === word || text === rev) {
                    for (let i = 0; i < word.length; i++) {
                        const nx = x + i*dx;
                        const ny = y + i*dy;
                        const cell = document.querySelector(`.cell[data-x="${nx}"][data-y="${ny}"]`);
                        cell.classList.add("found");
                    }
                }
            }
        }
    }
}

function nextLevel() {
    level++;
    gridSize = Math.min(14, gridSize + 1);
    generateGrid();
}

generateGrid();
</script>

</body>
</html>