<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Word Search Game</title>
<style>
  body {
    margin: 0;
    background: #f5f5f5;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    text-align: center;
  }

  h1 { margin-bottom: 5px; }
  p { margin: 0; }

  #author {
    margin-bottom: 15px;
    font-size: 14px;
    opacity: 0.7;
  }

  #gameWrapper {
    display: flex;
    gap: 20px;
    margin-top: 20px;
    flex-wrap: wrap;
    justify-content: center;
  }

  #grid {
    display: grid;
    gap: 2px;
    background: #ddd;
    padding: 5px;
  }

  .cell {
    width: 28px;
    height: 28px;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
  }

  .selected {
    background: #a0c8ff;
  }

  .found {
    background: #75ff8a !important;
    color: black;
  }

  #wordList {
    text-align: left;
    max-width: 150px;
  }

  .wordItem {
    font-size: 16px;
    margin: 4px 0;
  }

  .foundWord {
    text-decoration: line-through;
    color: green;
  }

  button {
    margin-top: 20px;
    padding: 10px 16px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>Word Search</h1>
<p>Find all the hidden words</p>
<p id="author">Made by @nortydigitalcrew</p>

<div id="gameWrapper">
  <div id="grid"></div>
  <div id="wordList"></div>
</div>

<button id="restartBtn">New Puzzle</button>

<script>
const wordBank = ["APPLE", "DOG", "HOUSE", "GAME", "CODE", "MONEY", "STAR", "BLUE", "PHONE", "CHAIR"];

let gridSize = 12;
let grid = [];
let words = [];
let selectedCells = [];
let isMouseDown = false;

function generateGrid() {
  grid = Array(gridSize).fill(0).map(() => Array(gridSize).fill(""));

  words = shuffle([...wordBank]).slice(0, 7);

  words.forEach(word => placeWord(word));

  fillEmpty();

  drawGrid();
  drawWords();
}

function placeWord(word) {
  const directions = [
    [1,0], [0,1], [1,1], [-1,1]
  ];

  let placed = false;

  while(!placed) {
    let row = Math.floor(Math.random() * gridSize);
    let col = Math.floor(Math.random() * gridSize);
    let dir = directions[Math.floor(Math.random() * directions.length)];

    if(canPlace(word, row, col, dir)) {
      for(let i=0;i<word.length;i++){
        grid[row + i*dir[0]][col + i*dir[1]] = word[i];
      }
      placed = true;
    }
  }
}

function canPlace(word, row, col, dir) {
  for(let i=0;i<word.length;i++){
    let r = row + i*dir[0];
    let c = col + i*dir[1];
    if(r<0 || r>=gridSize || c<0 || c>=gridSize) return false;
    if(grid[r][c] !== "" && grid[r][c] !== word[i]) return false;
  }
  return true;
}

function fillEmpty() {
  const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  for(let r=0;r<gridSize;r++){
    for(let c=0;c<gridSize;c++){
      if(!grid[r][c]) {
        grid[r][c] = letters[Math.floor(Math.random()*letters.length)];
      }
    }
  }
}

function drawGrid() {
  const gridContainer = document.getElementById("grid");
  gridContainer.innerHTML = "";
  gridContainer.style.gridTemplateColumns = `repeat(${gridSize}, 28px)`;

  for(let r=0;r<gridSize;r++){
    for(let c=0;c<gridSize;c++){
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.innerText = grid[r][c];
      cell.dataset.row = r;
      cell.dataset.col = c;

      cell.addEventListener("mousedown", startSelect);
      cell.addEventListener("mouseover", dragSelect);
      cell.addEventListener("mouseup", endSelect);

      gridContainer.appendChild(cell);
    }
  }
}

function drawWords() {
  const list = document.getElementById("wordList");
  list.innerHTML = "<h3>Words</h3>";

  words.forEach(word => {
    const w = document.createElement("div");
    w.classList.add("wordItem");
    w.id = "word-" + word;
    w.innerText = word;
    list.appendChild(w);
  });
}

function startSelect(e) {
  isMouseDown = true;
  clearSelection();
  selectCell(e.target);
}

function dragSelect(e) {
  if(isMouseDown) selectCell(e.target);
}

function endSelect() {
  isMouseDown = false;
  checkWord();
}

function selectCell(cell) {
  if(!cell.classList.contains("selected")) {
    cell.classList.add("selected");
    selectedCells.push(cell);
  }
}

function clearSelection() {
  selectedCells = [];
  document.querySelectorAll(".cell").forEach(c => c.classList.remove("selected"));
}

function checkWord() {
  const guess = selectedCells.map(c => c.innerText).join("");
  const reverse = guess.split("").reverse().join("");

  if(words.includes(guess) || words.includes(reverse)) {
    selectedCells.forEach(c => c.classList.add("found"));
    const w = words.includes(guess) ? guess : reverse;
    document.getElementById("word-" + w).classList.add("foundWord");
  }

  clearSelection();
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

document.getElementById("restartBtn").addEventListener("click", generateGrid);

generateGrid();
</script>

</body>
</html>